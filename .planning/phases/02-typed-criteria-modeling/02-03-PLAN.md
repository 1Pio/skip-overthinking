---
phase: 02-typed-criteria-modeling
plan: 03
type: execute
wave: 2
depends_on:
  - 02-01
files_modified:
  - src/features/criteria/templates.ts
  - src/features/criteria/utils/positivityHints.ts
  - src/features/criteria/components/TemplatePicker.tsx
  - src/features/criteria/components/TemplateConfirmModal.tsx
  - src/features/criteria/components/CriterionEditorPanel.tsx
autonomous: true
must_haves:
  truths:
    - "User can start criteria from templates grouped as Recommended and Measured."
    - "Template selection opens a brief confirm/customize step before adding a criterion."
    - "User sees non-blocking positivity wording hints and can apply one-click rewrites."
  artifacts:
    - path: "src/features/criteria/components/TemplatePicker.tsx"
      provides: "Scan-friendly template chooser with sectioned catalog"
      contains: "Recommended"
    - path: "src/features/criteria/components/TemplateConfirmModal.tsx"
      provides: "Confirm/customize flow applying strong defaults before add"
      contains: "Add criterion"
    - path: "src/features/criteria/components/CriterionEditorPanel.tsx"
      provides: "Dedicated non-inline criterion editor with type-specific fields"
      contains: "numeric_measured"
  key_links:
    - from: "src/features/criteria/components/TemplatePicker.tsx"
      to: "src/features/criteria/templates.ts"
      via: "sectioned template catalog"
      pattern: "section"
    - from: "src/features/criteria/components/CriterionEditorPanel.tsx"
      to: "src/features/criteria/utils/positivityHints.ts"
      via: "rewrite suggestion actions"
      pattern: "suggest"
---

<objective>
Deliver template-first acceleration and dedicated criterion editing semantics that keep users in a consistent desirability language.

Purpose: Satisfy CRT-02 through CRT-07 locked behavior around template sections, confirm/customize add flow, typed configuration, and soft positivity guidance without introducing invert toggles.
Output: Template picker + confirm modal, dedicated editor panel/modal for criteria, and positivity hint utilities with one-click rewrites.
</objective>

<execution_context>
@C:/Users/aaron/.config/opencode/get-shit-done/workflows/execute-plan.md
@C:/Users/aaron/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-typed-criteria-modeling/02-CONTEXT.md
@.planning/phases/02-typed-criteria-modeling/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build sectioned template picker with confirm/customize before criterion creation</name>
  <files>src/features/criteria/templates.ts, src/features/criteria/components/TemplatePicker.tsx, src/features/criteria/components/TemplateConfirmModal.tsx</files>
  <action>Finalize v1 template catalog to 6-8 entries split across `Recommended` and `Measured`, each with one-line purpose copy and strong defaults aligned to typed schema. Build a template picker that prioritizes fast scanability and low-friction selection. Selecting a template must open a brief confirm/customize modal/panel where users can adjust title/type config defaults before criterion creation is dispatched. Keep defaults deterministic and avoid creating a template-only criterion shape; all outputs must map directly into canonical criterion actions.</action>
  <verify>`bun run build && bun run lint` succeeds; UI renders explicit Recommended/Measured sections; selecting any template opens confirm/customize view before add.</verify>
  <done>Template path is faster than manual entry while staying schema-consistent: users pick from sectioned templates, customize briefly, then add valid typed criteria.</done>
</task>

<task type="auto">
  <name>Task 2: Build dedicated criterion editor panel with type config and positivity rewrite hints</name>
  <files>src/features/criteria/components/CriterionEditorPanel.tsx, src/features/criteria/utils/positivityHints.ts</files>
  <action>Create a dedicated criterion editor panel/modal (not inline expansion) for create/edit flows. Support only `rating_1_20` and `numeric_measured` types. For numeric measured, require raw direction selection (`lower raw is better` or `higher raw is better`) and optional unit input. Keep copy reinforcing raw-to-derived desirability conversion (higher-is-better 1-20 invariant) and emphasize derived desirability language while placing raw-value explanation in secondary details/help text. Implement soft (non-blocking) positivity suggestions with one-click rewrite hints (e.g., Cost -> Affordability) and never present a per-criterion invert toggle.</action>
  <verify>`bun run build && bun run lint` succeeds; editor supports two types only; numeric measured requires direction before save; positivity suggestions can be applied with one click and do not block save.</verify>
  <done>Criterion editing is dedicated and semantically clear: typed configuration is complete, positivity language is encouraged, and invert semantics are handled by wording or numeric direction only.</done>
</task>

</tasks>

<verification>
Run `bun run build && bun run lint`, then validate manually that template selection always goes through confirm/customize and editor copy consistently explains conversion into desirability with no invert control exposed.
</verification>

<success_criteria>
Users can quickly seed and edit criteria with explicit typed semantics, sectioned templates, and positivity guidance while preserving the no-invert, higher-is-better desirability model.
</success_criteria>

<output>
After completion, create `.planning/phases/02-typed-criteria-modeling/02-03-SUMMARY.md`
</output>
