---
phase: 04-results-and-explainability
plan: 04
type: execute
wave: 3
depends_on: [04-01, 04-02, 04-03]
files_modified:
  - src/features/results/components/ResultsStep.tsx
  - src/routes/results/ResultsRoute.tsx
  - src/styles.css
autonomous: true
must_haves:
  truths:
    - "User lands on a complete results experience after passing existing route guards."
    - "Hovering/focusing an option in table or visuals highlights the same option everywhere."
    - "User can inspect contribution and optional raw values in a compact why workflow."
    - "Results UI remains compact, legible, and responsive on desktop and mobile."
  artifacts:
    - path: "src/features/results/components/ResultsStep.tsx"
      provides: "Single orchestrator for ranking table, strict check, adaptive visual, controls, and why modal"
      contains: "highlightedOptionId"
    - path: "src/routes/results/ResultsRoute.tsx"
      provides: "Guarded route rendering real results step instead of placeholder"
      contains: "<ResultsStep"
    - path: "src/styles.css"
      provides: "Utilitarian results styling, moderate dimming, and expressive transitions with reduced-motion support"
      contains: "results-"
  key_links:
    - from: "src/features/results/components/ResultsStep.tsx"
      to: "src/features/results/state/results.selectors.ts"
      via: "selector payload assembly for all result surfaces"
      pattern: "selectResultsProjection"
    - from: "src/features/results/components/ResultsStep.tsx"
      to: "src/features/results/components/RankingTable.tsx"
      via: "shared hover/focus state passed as controlled props"
      pattern: "onOptionHover"
    - from: "src/features/results/components/ResultsStep.tsx"
      to: "src/features/results/components/AdaptiveVisual.tsx"
      via: "shared hover/focus/highlight state passed as controlled props"
      pattern: "focusedOptionId"
---

<objective>
Integrate Phase 4 components into the guarded results route and ship a complete, polished, explainable results step.

Purpose: Turn the new results building blocks into one cohesive user experience that is trustworthy, interpretable, and fast to scan.
Output: Route-integrated `ResultsStep` orchestration with production-ready styling and interaction wiring.
</objective>

<execution_context>
@C:/Users/aaron/.config/opencode/get-shit-done/workflows/execute-plan.md
@C:/Users/aaron/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-results-and-explainability/04-CONTEXT.md
@.planning/phases/04-results-and-explainability/04-RESEARCH.md
@src/routes/results/ResultsRoute.tsx
@src/styles.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Compose a single results orchestration step</name>
  <files>src/features/results/components/ResultsStep.tsx</files>
  <action>Implement `ResultsStep` as the orchestration layer that reads draft state, calls results selectors, and composes summary + visual + explainability components. Maintain one shared interaction state (`highlightedOptionId`, `focusedOptionId`, selected option for why modal, and global raw toggle) so hover/focus stays linked between table and visuals. Keep WSM surfaces primary and strict-check as secondary in layout hierarchy.</action>
  <verify>bun run lint</verify>
  <done>Results step renders all Phase 4 components from a single selector payload and shared interaction state without duplicated computations.</done>
</task>

<task type="auto">
  <name>Task 2: Replace results placeholder route with integrated step</name>
  <files>src/routes/results/ResultsRoute.tsx</files>
  <action>Keep existing option/criteria/weights guard behavior and recovery messaging intact, then replace placeholder content with `ResultsStep`. Ensure blocked deep links still redirect exactly as before; only the successful path changes to render real results experience.</action>
  <verify>bun run lint && bun run build</verify>
  <done>Results route preserves prerequisite enforcement and renders full Phase 4 results UI when prerequisites are satisfied.</done>
</task>

<task type="auto">
  <name>Task 3: Apply utilitarian results styling and motion rules</name>
  <files>src/styles.css</files>
  <action>Add `results-*` styling for compact ranking table density, subtle coverage badge tones, secondary strict-check panel emphasis, moderate dimming in focus mode, and compact why modal readability. Implement expressive criteria-count transition choreography while honoring `prefers-reduced-motion` (disable or simplify motion under reduced-motion preference). Preserve existing app style language and responsive behavior on narrow widths.</action>
  <verify>bun run lint && bun run build</verify>
  <done>Results view is polished and readable on desktop/mobile, with intentional motion that respects reduced-motion accessibility.</done>
</task>

</tasks>

<verification>
Run `bun run dev` and verify: (1) results route still guards missing prerequisites, (2) WSM table + WPM panel render, (3) adaptive visual switches at 1/2/3+ criteria, (4) linked hover/focus works across table and visual, (5) why modal closes via X and backdrop, (6) raw toggle appears only when measured criteria exist.
</verification>

<success_criteria>
Phase 4 user-facing results experience is complete, route-guard-safe, and aligned with all locked explainability/UI decisions in `04-CONTEXT.md`.
</success_criteria>

<output>
After completion, create `.planning/phases/04-results-and-explainability/04-04-SUMMARY.md`
</output>
