---
phase: 01-foundation-setup-and-options
plan: 06
type: execute
wave: 3
depends_on: ["01-02", "01-05"]
files_modified:
  - src/main.tsx
  - src/App.tsx
  - src/app/App.tsx
  - src/app/router.tsx
  - src/routes/setup/DecisionSetupRoute.tsx
  - src/routes/setup/OptionsRoute.tsx
  - src/routes/criteria/CriteriaRoute.tsx
  - src/routes/ratings/RatingsRoute.tsx
  - src/routes/results/ResultsRoute.tsx
autonomous: true
must_haves:
  truths:
    - "User can navigate a route-per-step wizard shell in hash mode across setup, criteria, ratings, and results paths."
    - "Direct navigation to option-authoring routes is blocked until decision setup prerequisite passes."
    - "User can visit each phase-1 step URL and receive a valid screen or an expected guard redirect instead of a dead route."
  artifacts:
    - path: "src/app/router.tsx"
      provides: "Route graph and guard wrappers for phase-1 steps"
      contains: "/setup/decision"
    - path: "src/app/App.tsx"
      provides: "App-level provider and router composition"
      contains: "DraftProvider"
    - path: "src/main.tsx"
      provides: "Entrypoint render wiring into app router shell"
      contains: "App"
    - path: "src/routes/setup/OptionsRoute.tsx"
      provides: "Options-step placeholder route guarded by decision prerequisites"
      contains: "navigate"
  key_links:
    - from: "src/app/App.tsx"
      to: "src/features/decision/state/DraftProvider.tsx"
      via: "provider wraps route tree"
      pattern: "DraftProvider"
    - from: "src/main.tsx"
      to: "src/app/App.tsx"
      via: "entrypoint imports and renders app router shell"
      pattern: "from './app/App'"
    - from: "src/app/router.tsx"
      to: "src/features/decision/state/decisionPrereq.ts"
      via: "route wrappers evaluate decision readiness"
      pattern: "isDecisionStepComplete"
---

<objective>
Wire the wizard route shell and decision-step guard structure so later setup/option plans can focus on concrete UI behavior instead of route scaffolding.

Purpose: Split route topology and guard plumbing from state/domain setup to reduce context load and avoid cross-cutting edits.
Output: App/router wiring, explicit placeholder routes, and decision prerequisite guard integration points.
</objective>

<execution_context>
@C:/Users/aaron/.config/opencode/get-shit-done/workflows/execute-plan.md
@C:/Users/aaron/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-setup-and-options/01-CONTEXT.md
@.planning/phases/01-foundation-setup-and-options/01-RESEARCH.md
@.planning/phases/01-foundation-setup-and-options/01-02-SUMMARY.md
@.planning/phases/01-foundation-setup-and-options/01-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create route-per-step wizard shell and placeholder route components</name>
  <files>src/main.tsx, src/App.tsx, src/app/App.tsx, src/app/router.tsx, src/routes/setup/DecisionSetupRoute.tsx, src/routes/setup/OptionsRoute.tsx, src/routes/criteria/CriteriaRoute.tsx, src/routes/ratings/RatingsRoute.tsx, src/routes/results/ResultsRoute.tsx</files>
  <action>Create explicit hash-routed step paths for decision setup, options, criteria, ratings, and results with lightweight placeholder UIs. Wire `src/app/App.tsx` to compose draft provider and router once, then connect the mounted entrypoint (`src/main.tsx` and transitional `src/App.tsx` shell) so the new router shell is actually rendered. Keep route path names stable to preserve deep-link contracts for upcoming plans.</action>
  <verify>Run `bun run dev`, navigate to each hash route, and confirm all routes render without runtime errors (placeholder content is acceptable).</verify>
  <done>All phase-1 wizard steps are routable through a single app-level router/provider composition.</done>
</task>

<task type="auto">
  <name>Task 2: Integrate decision prerequisite guard logic into route navigation flow</name>
  <files>src/app/router.tsx, src/routes/setup/OptionsRoute.tsx, src/routes/criteria/CriteriaRoute.tsx, src/routes/ratings/RatingsRoute.tsx, src/routes/results/ResultsRoute.tsx</files>
  <action>Use `isDecisionStepComplete` helper from decision state to guard forward navigation out of setup start. Enforce protection in route wrappers/redirection logic (not only button disabled states) so direct URL access cannot bypass decision-step completion requirements.</action>
  <verify>With empty draft state, navigate directly to `#/setup/options` and later-step routes, and confirm router redirects to decision setup instead of rendering protected content.</verify>
  <done>Decision prerequisite enforcement exists at route level and blocks deep-link bypass before decision data is valid.</done>
</task>

</tasks>

<verification>
Validate shell behavior end-to-end: step routes resolve, app/provider wiring holds state context, and route-level decision guards block invalid direct navigation.
</verification>

<success_criteria>
DEC-03 and DEC-04 route-shell prerequisites are structurally ready: explicit step routes exist and decision completion is enforced through centralized route guards.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-setup-and-options/01-06-SUMMARY.md`
</output>
